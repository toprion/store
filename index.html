<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>id</title>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #1a1a2e;
      color: #fff;
    }
    .container {
            width: 90%;
            margin: 0 auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        .header img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
        }
        .header .icons {
            display: flex;
            align-items: center;
        }
        .header .icons i {
            font-size: 1.5em;
            margin-left: 20px;
        }
        .banner {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        .banner img {
            width: 100%;
            border-radius: 10px;
        }
        .section-title {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .section-title i {
            color: #ff4500;
            margin-right: 10px;
        }
        .section-title h2 {
            font-size: 1.5em;
            margin: 0;
        }
        .product-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .product-item {
            background-color: #1e1e1e;
            border-radius: 10px;
            padding: 10px;
            flex: 1 1 calc(50% - 10px);
            display: flex;
            align-items: center;
        }
        .product-item img {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            margin-right: 10px;
        }
        .product-item .product-info {
            flex-grow: 1;
        }
        .product-item .product-info h3 {
            margin: 0;
            font-size: 1em;
        }
        .product-item .product-info p {
            margin: 0;
            font-size: 0.8em;
            color: #aaa;
        }
        .tabs {
            display: flex;
            justify-content: center;
            margin: 20px 0;
    }
    .tabs button {
            background-color: #1e1e1e;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            margin-left: 10px;
   }
    .tabs button.active {
            background-color: #007bff;
   }
    .container-product {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
    }
    .card {
      background-color: #333;
      border-radius: 10px;
      margin: 10px;
      width: 100px;
      overflow: hidden;
      position: relative;
      text-align: center;
      cursor: pointer;
    }
    .card img {
      width: 100%;
      height: 100px; /* Ukuran gambar yang seragam */
      object-fit: cover; /* Menjaga proporsi gambar */
    }
    .card .content {
      padding: 10px;
    }
    .card .title {
      font-size: 16px;
      font-weight: bold;
      margin: 5px 0;
    }
   .footer {
            background-color: #1e1e1e;
            padding: 20px 0;
            text-align: center;
        }
        .footer .social-icons {
            margin-bottom: 20px;
            color: #F1FFFF;
        }
        .footer .social-icons i {
            font-size: 1.5em;
            margin: 0 10px;
        }
        .footer .links {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            border-bottom: 0.1px solid #373746;
        }
        .footer .links h3 {
          color: #D0D3FF;
        }
        .footer .links div {
            margin: 2px 0;
        }
        .footer .links a {
            color: #E8FFFF;
            text-decoration: none;
            display: block;
            margin: 20px 0;
        }
        .footer .copyright {
            margin-top: 20px;
            font-size: 0.8em;
            color: #aaa;
        }
  </style>
</head>
<body id="body" style="display:none">
  <div id="home">
  <div class="container" id="container">
   <header class="header">
    <img alt="User avatar" height="50" src="kyyragoods.jpeg" width="50"/>
    <div class="icons">
     <i class="fas fa-search">
     </i>
     <i class="fas fa-user">
     </i>
    </div>
   </header>
   <div class="banner">
    <img alt="Banner image with gaming characters" height="200" src="https://storage.googleapis.com/a1aa/image/qlep9PVyv0w4U6VrGcp268hOMwoSOYHcHK7ZAne2g633VK8TA.jpg" width="800"/>
   </div>
   <div class="section-title">
    <i class="fas fa-fire">
    </i>
    <h2>
     POPULER SEKARANG!
    </h2>
   </div>
   <div class="product-list">
    <div  class="product-item">
     <img alt="Mobile Legends game cover" height="50" src="https://storage.googleapis.com/a1aa/image/YyFYIleiC50XHKL95oKsGjz1jZYKQwXzViCRLWNaMQO9KFeTA.jpg" width="50"/>
     <div class="product-info">
      <h3>
       Mobile Legends
      </h3>
      <p>
       Moonton
      </p>
     </div>
    </div>
    <div class="product-item">
     <img alt="Free Fire MAX game cover" height="50" src="https://storage.googleapis.com/a1aa/image/AJxdonRD9KKaChJPnxfuUQTTISeJLktm9E3PwCib8ZrHWK8TA.jpg" width="50"/>
     <div class="product-info">
      <h3>
       Free Fire MAX
      </h3>
      <p>
       Garena
      </p>
     </div>
    </div>
    <div class="product-item">
     <img alt="Free Fire game cover" height="50" src="https://storage.googleapis.com/a1aa/image/JSVCgHXKiEaBNhJJSMM2GkZuhVdADJpi80JYm1xbrrUfKFeTA.jpg" width="50"/>
     <div class="product-info">
      <h3>
       Free Fire
      </h3>
      <p>
       Garena
      </p>
     </div>
    </div>
    <div class="product-item">
     <img alt="Mobile Legends game cover" height="50" src="https://storage.googleapis.com/a1aa/image/YyFYIleiC50XHKL95oKsGjz1jZYKQwXzViCRLWNaMQO9KFeTA.jpg" width="50"/>
     <div class="product-info">
      <h3>
       Mobile Legends
      </h3>
      <p>
       Moonton
      </p>
     </div>
    </div>
    <div class="product-item">
     <img alt="PUBG Mobile game cover" height="50" src="https://storage.googleapis.com/a1aa/image/iLPywIIjcr6cIx7YLJwFtDthyH5WB0rYHTrNlVqQCiMeKFeTA.jpg" width="50"/>
     <div class="product-info">
      <h3>
       PUBG Mobile
      </h3>
      <p>
       Tencent Games
      </p>
     </div>
    </div>
   </div>
  </div>
  <div class="tabs">
  <div id="categoryList" class="category-list"></div>
  </div>
  <div id="brandList" class="container-product"></div>
  <div id="brandDetails" class="brand-details"></div>
  </div>
  <div id="privacy" style="display:none">
    <div class="privacy-policy" style="font-family: Arial, sans-serif; line-height: 1.6; color: #E8FFFF; padding: 20px; max-width: 800px; margin: auto;">
      <h1 style="text-align: center; color: #FFFFFF;">Kebijakan Privasi</h1>
      <p>Di <strong>Toprion</strong>, yang dapat diakses melalui <a href="https://toprion.my.id" style="color: #4CAF50; text-decoration: none;">https://toprion.my.id</a>, kami menghargai privasi setiap pengunjung dan pelanggan kami. Kebijakan Privasi ini menjelaskan informasi apa saja yang kami kumpulkan, bagaimana kami menggunakannya, serta bagaimana kami melindungi data pribadi Anda.</p>
      <p>Jika Anda memiliki pertanyaan tambahan atau memerlukan informasi lebih lanjut terkait Kebijakan Privasi ini, jangan ragu untuk menghubungi kami.</p>
      <p>Kebijakan ini hanya berlaku untuk aktivitas yang dilakukan secara daring di situs web kami. Kebijakan ini tidak mencakup informasi yang dikumpulkan secara luring atau melalui platform selain toprion.my.id.</p>
    
      <h2 style="color: #FFFFFF;">Persetujuan</h2>
      <p>Dengan mengakses atau menggunakan layanan kami, Anda dianggap telah menyetujui Kebijakan Privasi ini dan ketentuannya.</p>
    
      <h2 style="color: #FFFFFF;">Informasi yang Kami Kumpulkan</h2>
      <p>Informasi yang kami kumpulkan meliputi data pribadi yang Anda berikan secara langsung, seperti:</p>
      <ul>
        <li><strong>Nomor Telepon</strong> – Digunakan untuk memproses dan memverifikasi transaksi.</li>
        <li><strong>Alamat Email</strong> – Digunakan untuk mengirimkan informasi terkait pesanan atau transaksi Anda.</li>
        <li><strong>ID Game</strong> – Digunakan untuk memastikan layanan digital yang Anda pesan sesuai dengan akun yang ditentukan.</li>
      </ul>
      <p>Jika Anda menghubungi kami secara langsung, kami mungkin meminta informasi tambahan seperti nama lengkap atau kontak lainnya untuk mempermudah komunikasi.</p>
    
      <h2 style="color: #FFFFFF;">Bagaimana Kami Menggunakan Informasi Anda</h2>
      <p>Informasi yang Anda berikan digunakan secara eksklusif untuk:</p>
      <ul>
        <li>Menyelesaikan proses transaksi Anda dengan cepat dan aman.</li>
        <li>Memberikan pembaruan terkait status pesanan.</li>
        <li>Mengelola dan meningkatkan kinerja layanan kami.</li>
        <li>Menangani keluhan atau pertanyaan terkait layanan.</li>
      </ul>
      <p>Kami menjamin bahwa data Anda tidak akan digunakan untuk tujuan lain selain yang disebutkan di atas.</p>
    
      <h2 style="color: #FFFFFF;">Keamanan Data Anda</h2>
      <p>Kami memahami pentingnya menjaga keamanan data pribadi Anda. Oleh karena itu, data Anda hanya digunakan untuk keperluan transaksi dan akan dihapus otomatis dari sistem kami dalam waktu yang singkat setelah transaksi selesai.</p>
    
      <h2 style="color: #FFFFFF;">Berkas Log dan Teknologi Pelacakan</h2>
      <p>Seperti banyak situs web lainnya, kami menggunakan berkas log untuk merekam data pengunjung. Data yang tercatat meliputi:</p>
      <ul>
        <li>Alamat IP Anda.</li>
        <li>Tipe browser yang digunakan.</li>
        <li>Waktu dan tanggal kunjungan.</li>
        <li>Halaman yang Anda akses selama kunjungan.</li>
      </ul>
      <p>Informasi ini digunakan untuk menganalisis tren, mengelola situs, dan meningkatkan pengalaman pengguna. Data ini tidak terkait dengan informasi pribadi yang dapat mengidentifikasi Anda secara langsung.</p>
    
      <h2 style="color: #FFFFFF;">Cookies</h2>
      <p>Kami menggunakan cookies untuk menyimpan preferensi pengguna dan menyesuaikan pengalaman Anda selama mengakses situs web kami. Cookies adalah file kecil yang disimpan di perangkat Anda oleh browser. Anda dapat menonaktifkan cookies melalui pengaturan browser Anda, namun hal ini dapat memengaruhi beberapa fitur di situs kami.</p>
    
      <h2 style="color: #FFFFFF;">Privasi Pihak Ketiga</h2>
      <p>Kebijakan Privasi ini tidak mencakup layanan pihak ketiga yang mungkin terkait dengan toprion.my.id, seperti pengiklan atau mitra lainnya. Kami menganjurkan Anda untuk membaca kebijakan privasi dari pihak ketiga tersebut untuk mengetahui bagaimana mereka mengelola informasi Anda.</p>
    
      <h2 style="color: #FFFFFF;">Perubahan pada Kebijakan Privasi</h2>
      <p>Kebijakan Privasi ini dapat diperbarui dari waktu ke waktu untuk mencerminkan perubahan pada layanan atau kebutuhan hukum. Setiap perubahan akan langsung dipublikasikan di halaman ini, dan Anda disarankan untuk memeriksa secara berkala.</p>
    
      <h2 style="color: #FFFFFF;">Hubungi Kami</h2>
      <p>Jika Anda memiliki pertanyaan atau memerlukan bantuan lebih lanjut, jangan ragu untuk menghubungi kami melalui:</p>
      <ul>
        <li>Email: <a href="mailto:toprionid@gmail.com" style="color: #4CAF50;">toprionid@gmail.com</a></li>
        <li>Nomor Telepon: 081554269688</li>
        <li>Telegram: <a href="https://t.me/toprion" style="color: #4CAF50;">@toprion</a></li>
        <li>Instagram: <a href="https://instagram.com/toprion" style="color: #4CAF50;">@toprion</a></li>
      </ul>
      <p style="text-align: center;">© 2024 toprion.my.id</p>
    </div>
</div>
  </div>
    <footer class="footer">
    <div class="social-icons">
     <i class="fab fa-instagram">
     </i>
     <i class="fab fa-youtube">
     </i>
     <i class="fab fa-whatsapp">
     </i>
     <i class="fab fa-facebook">
     </i>
    </div>
    <div class="links">
     <div>
      <h3>
       Peta Situs
      </h3>
      <a href="#">
       Beranda
      </a>
      <a href="#">
       Hubungi Kami
      </a>
     </div>
     <div>
      <h3>
       Dukungan
      </h3>
      <a href="#">
       WhatsApp
      </a>
      <a href="#">
       Email
      </a>
      <a href="#">
       Telegram
      </a>
      <a href="#">
       Instagram
      </a>
      <a href="#">
       Facebook
      </a>
     </div>
     <div>
      <h3>
       Informasi
      </h3>
      <a id="kebijakan-privasi" href="#kebijakan-privasi">
       Kebijakan Privasi
      </a>
      <a href="#">
       Syarat &amp; Ketentuan
      </a>
     </div>
    </div>
    <div class="links">
    
    </div>
    <div class="copyright">
     © 2024 TOPRION. All rights reserved.
    </div>
   </footer>
  
  
  <script>
    let brandData = [];
    let currentCategory = "Games";
    let selectedProduct = null;
    let refId = ''; // Variabel untuk menyimpan ref_id

    const BASE_URL = "https://server.goppob.my.id"; // URL Vercel untuk pengujian sementara, ganti dengan URL final
    
    document.getElementById('kebijakan-privasi').addEventListener('click', function(event) {
    const targetElement = document.getElementById('privacy');
    const home = document.getElementById('home');
    home.style.display = "none";
    targetElement.style.display = "block";
  });

    async function fetchBrands() {
      try {
        const response = await fetch(`${BASE_URL}/price-list`);
        if (!response.ok) throw new Error("Gagal mengambil data dari API");

        brandData = await response.json();
        const categories = [...new Set(brandData.map(item => item.category))];
        displayCategories(categories);
        displayBrands(currentCategory);
      } catch (error) {
        console.error("Error fetching brands:", error);
      }
    }

    function displayCategories(categories) {
      const categoryList = document.getElementById("categoryList");
      const body = document.getElementById("body");
      
      categoryList.innerHTML = "";
      categories.forEach(category => {
        const categoryButton = document.createElement("button");
        categoryButton.className = "category-button";
        categoryButton.textContent = category;
        categoryButton.onclick = () => {
          currentCategory = category;
          displayBrands(category);
        };
        categoryList.appendChild(categoryButton);
      });
      body.style.display = "block";
      categoryList.style.display = "block";
    }

    function displayBrands(category) {
      const brandList = document.getElementById("brandList");
      const brandDetails = document.getElementById("brandDetails");
      const categoryList = document.getElementById("categoryList");
      const container = document.getElementById("container");

      brandList.innerHTML = "";
      brandDetails.style.display = "none";
      categoryList.style.display = "block";
      container.style.display = "block";

      const filteredBrands = brandData.filter(item => item.category === category);
      const displayedBrands = new Set();

      filteredBrands.forEach(item => {
        if (displayedBrands.has(item.brand)) return;
        displayedBrands.add(item.brand);

        const brandItem = document.createElement("div");
        brandItem.className = "card";
        const brandHash = item.brand.replace(/\s+/g, "-");

        brandItem.innerHTML = `
          <img src="kyyragoods.jpeg" alt="${item.brand}">
          <div class="content">
            <div class="title">${item.brand}</div>
          </div>
        `;
        brandItem.onclick = () => handleBrandClick(item.brand);
        brandList.appendChild(brandItem);
      });

      brandList.style.display = "flex";
    }

    function handleBrandClick(brand) {
      window.location.hash = brand.replace(/\s+/g, "-");
    }

    function displayBrandDetails(brand) {
      const brandDetails = document.getElementById("brandDetails");
      const categoryList = document.getElementById("categoryList");
      const brandList = document.getElementById("brandList");
      const container = document.getElementById("container");

      categoryList.style.display = "none";
      brandList.style.display = "none";
      container.style.display = "none";

      const products = brandData.filter(item => item.category === currentCategory && item.brand === brand);

      brandDetails.innerHTML = `
        <div class="form-container">
          <label for="customerNo">Masukkan Nomor Pelanggan:</label>
          <input type="text" id="customerNo" placeholder="Nomor Pelanggan">
          <div id="error" class="error"></div>
        </div>
        ${products
          .map(item => `
            <div class="product-item">
              <button class="product-button" onclick="selectProduct(this, '${item.buyer_sku_code}', '${item.product_name}', '${item.kyyraprice}')">
                ${item.product_name} - Rp${parseInt(item.kyyraprice).toLocaleString("id-ID")}
              </button>
            </div>
          `)
          .join("")}
        <button class="submit-button" onclick="submitTransaction()">Submit</button>
      `;

      brandDetails.style.display = "block";
    }

    function selectProduct(button, sku, productName, price) {
      document.querySelectorAll(".product-button").forEach(btn => btn.classList.remove("selected"));
      button.classList.add("selected");
      selectedProduct = { sku, productName, price };
    }

    async function submitTransaction() {
      const customerNo = document.getElementById("customerNo").value;
      const error = document.getElementById("error");

      if (!customerNo) {
        error.textContent = "Silahkan isi data akun dahulu";
        document.getElementById("customerNo").focus();
        return;
      }

      if (!selectedProduct) {
        alert("Harap pilih produk terlebih dahulu!");
        return;
      }

      error.textContent = "";
      const requestData = {
        buyer_sku_code: selectedProduct.sku,
        customer_no: customerNo,
      };

      try {
        const response = await fetch(`${BASE_URL}/admin`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(requestData),
        });

        if (!response.ok) throw new Error("Gagal mengirim data ke server");

        const transactionResponse = await response.json();
        console.log(transactionResponse);
        refId = transactionResponse.ref_id; // Menyimpan ref_id

        // Menyimpan respons transaksi ke localStorage
        localStorage.setItem("transactionResponse", JSON.stringify(transactionResponse));

      } catch (error) {
        alert("Terjadi kesalahan: " + error.message);
      }
    }

    function handleHashChange() {
      const brand = window.location.hash.slice(1).replace(/-/g, " ");
      const categoryList = document.getElementById("categoryList");

      if (!brand) {
        categoryList.style.display = "block";
        displayBrands(currentCategory);
        return;
      }
      displayBrandDetails(brand);
    }

    window.onload = () => {
      fetchBrands();
      window.addEventListener("hashchange", handleHashChange);
      
    };
    
  </script>
</body>
</html>
